version: '3.1'

services: 
    db: 
        image: postgres
        volumes:
          #Data is persistant between runs on db-data folder
          - ./db-data:/var/lib/postgresql/data 
         #volumes:
         # - pgdata:/var/lib/postgresql/data
        environment: 
            POSTGRES_USER: admin
            POSTGRES_PASSWORD: 1515
            POSTGRES_DB: taxi

    adminer:
        image: adminer
        restart: always
        ports:
          - 8081:8080
    taxi:
        environment:
          - AWS_SECRET_ACCESS_KEY=rF216u64ivdEOkac6+2Vlwd3PwLubvTSM4nh2Lo8
          - AWS_ACCESS_KEY_ID=AKIAJAPBSOE57IJVV54Q
        depends_on:
          - db
        image: vosmushko/taxi:post3
        restart: always
        ports:
          - "8080:80"
        